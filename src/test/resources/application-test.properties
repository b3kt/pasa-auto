# Test Configuration for Pasa Auto

# Profile Configuration
%test.quarkus.profile=test

# Quinoa Configuration (disabled for tests)
%test.quarkus.quinoa.dev-server.enabled=false
%test.quarkus.quinoa.package-manager-install=false

# Database Configuration for Testcontainers
%test.quarkus.datasource.db-kind=postgresql
%test.quarkus.datasource.username=test
%test.quarkus.datasource.password=test
%test.quarkus.datasource.jdbc.url=jdbc:tc:postgresql:15-alpine:///pasa_auto_test?TC_INITSCRIPT=init-test.sql

# Hibernate Configuration for tests
%test.quarkus.hibernate-orm.database.generation=drop-and-create
%test.quarkus.hibernate-orm.log.sql=true
%test.quarkus.hibernate-orm.log.format-sql=true

# Flyway Configuration (disabled for tests - use Hibernate generation)
%test.quarkus.flyway.migrate-at-start=false

# Security Configuration for tests
%test.quarkus.security.users.embedded.enabled=false
%test.app.security.salt=test_salt_string_16_chars

# JWT Configuration for tests
%test.smallrye.jwt.sign.key.location=classpath:test-private-key.pem
%test.mp.jwt.verify.publickey.location=classpath:test-public-key.pem
%test.mp.jwt.verify.issuer=http://localhost:8081
%test.jwt.issuer=http://localhost:8081
%test.jwt.expiration.hours=1

# CORS Configuration
%test.quarkus.http.cors=true
%test.quarkus.http.cors.origins=http://localhost:8081,http://localhost:3000
%test.quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
%test.quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS,PATCH

# OpenAPI/Swagger Configuration (enabled for tests)
%test.quarkus.smallrye-openapi.enabled=true
%test.quarkus.smallrye-openapi.info-title=Pasa Auto Test API
%test.quarkus.smallrye-openapi.info-version=1.0.0-test
%test.quarkus.smallrye-openapi.info-description=Test API for Pasa Auto Application
%test.quarkus.smallrye-openapi.servers=http://localhost:8081
%test.quarkus.smallrye-openapi.path=/openapi
%test.quarkus.swagger-ui.always-include=true
%test.quarkus.swagger-ui.path=/swagger-ui
%test.quarkus.swagger-ui.enabled=true

# Repository Configuration
%test.app.repository.type=jpa

# RBAC Configuration (enabled for tests)
%test.app.rbac.enabled=true

# Feature Flags
%test.app.features.stock-integration.enabled=false

# Logging Configuration for tests
%test.quarkus.log.console.enable=true
%test.quarkus.log.console.format=%d{HH:mm:ss,SSS} %-5p [%c{3.}] (%t) %s%e%n
%test.quarkus.log.level=INFO
%test.quarkus.log.category."com.github.b3kt".level=DEBUG
%test.quarkus.log.category."org.hibernate.SQL".level=DEBUG
%test.quarkus.log.category."org.hibernate.type.descriptor.sql".level=TRACE

# Test-specific configuration
%test.quarkus.test.profile=test
%test.quarkus.http.test-port=8081

# HTTP Configuration for tests
%test.quarkus.http.ssl=false
%test.quarkus.http.port=8081
%test.quarkus.http.insecure-requests=enabled

# Cache Configuration for tests
%test.quarkus.cache.enabled=false
